<div *ngIf="(data.entity && dataLoaded); else showElse">
  <div class="well">
    <form (ngSubmit)="onSubmit()" [formGroup]="form" novalidate>
      <form-header [data]="data"></form-header>


      <div class="panel-group" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
          <div class="panel-heading" role="tab" id="headingOne">
            <h3 class="panel-title">
              Company
            </h3>
          </div>
          <div class="panel-body row">
            <div class="col-sm-12">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.CompanyName"></df-formfield>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default" data-form-group-id="address">
          <div class="panel-heading" role="tab">
            <h3 class="panel-title">
              Primary Address
            </h3>
          </div>
          <div class="panel-body row">
            <div class="col-sm-12">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.AddressLine1"></df-formfield>
              </div>
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.AddressLine2"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.AddressCity"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <df-formfield [form]="form" [formField]="formFields.AddressState"></df-formfield>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.AddressPostalCode"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <df-formfield [form]="form" [formField]="formFields.AddressCountry"></df-formfield>
            </div>

          </div>
        </div>
        <div class="panel panel-default" data-form-group-id="primary-contact">
          <div class="panel-heading" role="tab">
            <h3 class="panel-title">
              Primary Contact
            </h3>
          </div>
          <div class="panel-body row">
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.PrimaryFirstName"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.PrimaryLastName"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.PrimaryPhone"></df-formfield>
              </div>
            </div>
            <div class="col-sm-3">
              <div class="form-group">
                <df-formfield [form]="form" [formField]="formFields.PrimaryEmail"></df-formfield>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default" data-form-group-id="audit">
          <div class="panel-heading" role="tab" id="headingTwo">
            <h4 class="panel-title">
              <a class="collapsed" role="button" data-toggle="collapse" href="#collapseTwo"
                 aria-expanded="false" aria-controls="collapseTwo">
                Audit
              </a>
            </h4>
          </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
            <div class="panel-body">
              <div class="row">
                <label class="col-sm-2">{{formFields.CreatedDate.label}}</label>
                <div class="col-sm-4">
                  {{form.value.CreatedDate}}
                </div>
                <label class="col-sm-4">{{formFields.CreatedBy.label}}</label>
                <div class="col-sm-2">
                  {{form.value.CreatedBy}}
                </div>
              </div>
              <div class="row">
                <label class="col-sm-3">{{formFields.LastModifiedBy.label}}</label>
                <div class="col-sm-3">
                  <div class="form-group">
                    {{form.value.LastModifiedBy}}
                  </div>
                </div>
                <label class="col-sm-3">{{formFields.LastModifiedDate.label}}</label>
                <div class="col-sm-3">
                  {{form.value.LastModifiedDate}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-row" data-form-group-id="submit">
        <button type="submit" class="btn btn-default" [disabled]="!form.valid">Save</button>
      </div>
    </form>
    <div *ngIf="this.submittedAndSaved" class="form-row">
      <strong>Saved the following values</strong><br>{{payLoad}}
    </div>
  </div>
</div>
<ng-template #showElse>
  Loading...
</ng-template>
